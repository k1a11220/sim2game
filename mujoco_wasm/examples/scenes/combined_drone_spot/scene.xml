<mujoco model="Drone and Go1 Simple Combined">
  <!-- Stadium ground -->
  <include file="../stadium_ground.xml"/>

  <!-- Drone settings -->
  <compiler autolimits="true" meshdir="../skydio_x2/assets" texturedir="../skydio_x2/assets"/>
  <option timestep="0.01" density="1.225" viscosity="1.8e-5"/>

  <statistic center="0 0 1.5" extent="80" meansize=".05"/>

  <visual>
    <headlight diffuse="0.2 0.2 0.2" ambient="0.05 0.05 0.05" specular="0 0 0"/>
    <rgba haze="0 0 0 0"/>
    <global azimuth="-20" elevation="-20"/>
    <map zfar="2000"/>
  </visual>

  <!-- Drone assets -->
  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.9 0.9 0.92" rgb2="0.7 0.7 0.72" width="512" height="3072"/>
    <texture name="X2_lowpoly_texture_SpinningProps_1024" type="2d" file="../skydio_x2/assets/X2_lowpoly_texture_SpinningProps_1024.png"/>
    <material name="phong3SG" texture="X2_lowpoly_texture_SpinningProps_1024"/>
    <material name="invisible" rgba="0 0 0 0"/>
    <mesh name="X2_lowpoly" file="../skydio_x2/assets/X2_lowpoly.obj" scale="0.01 0.01 0.01"/>
  </asset>

  <!-- Drone defaults -->
  <default>
    <default class="x2">
      <geom mass="0"/>
      <motor ctrlrange="0 13"/>
      <default class="visual">
        <geom group="2" type="mesh" contype="0" conaffinity="0"/>
      </default>
      <default class="collision">
        <geom group="3" type="box"/>
        <default class="rotor">
          <geom type="ellipsoid" size=".13 .13 .01"/>
        </default>
      </default>
      <site group="5"/>
    </default>
  </default>

  <worldbody>
    <light pos="0 0 20" dir="0 0 -1" directional="true"/>

    <!-- Drone positioned on the right side -->
    <body name="x2" pos="8 0 2" childclass="x2">
      <freejoint/>
      <camera name="track" pos="-1 0 .5" xyaxes="0 -1 0 1 0 2" mode="trackcom"/>
      <site name="imu" pos="0 0 .02"/>
      <geom material="phong3SG" mesh="X2_lowpoly" class="visual" quat="0 0 1 1"/>
      <geom class="collision" size=".06 .027 .02" pos=".04 0 .02"/>
      <geom class="collision" size=".06 .027 .02" pos=".04 0 .06"/>
      <geom class="collision" size=".05 .027 .02" pos="-.07 0 .065"/>
      <geom class="collision" size=".023 .017 .01" pos="-.137 .008 .065" quat="1 0 0 1"/>
      <geom name="rotor1" class="rotor" pos="-.14 -.18 .05" mass=".25"/>
      <geom name="rotor2" class="rotor" pos="-.14 .18 .05" mass=".25"/>
      <geom name="rotor3" class="rotor" pos=".14 .18 .08" mass=".25"/>
      <geom name="rotor4" class="rotor" pos=".14 -.18 .08" mass=".25"/>
      <geom size=".16 .04 .02" pos="0 0 0.02" type="ellipsoid" mass=".325" class="visual" material="invisible"/>
      <site name="thrust1" pos="-.14 -.18 .05"/>
      <site name="thrust2" pos="-.14 .18 .05"/>
      <site name="thrust3" pos=".14 .18 .08"/>
      <site name="thrust4" pos=".14 -.18 .08"/>
    </body>

    <!-- Simple Go1-style robot on the left -->
    <body name="simple_go1" pos="-8 0 0.5">
      <freejoint/>
      <!-- Main body -->
      <geom type="box" size="0.3 0.15 0.1" rgba="0.9 0.7 0.2 1"/>

      <!-- Legs - Front Left -->
      <body pos="0.25 0.15 -0.1">
        <geom type="capsule" size="0.02 0.15" pos="0 0 -0.15" rgba="0.8 0.6 0.1 1"/>
        <geom type="sphere" size="0.03" pos="0 0 -0.3" rgba="0.7 0.5 0.0 1"/>
      </body>

      <!-- Legs - Front Right -->
      <body pos="0.25 -0.15 -0.1">
        <geom type="capsule" size="0.02 0.15" pos="0 0 -0.15" rgba="0.8 0.6 0.1 1"/>
        <geom type="sphere" size="0.03" pos="0 0 -0.3" rgba="0.7 0.5 0.0 1"/>
      </body>

      <!-- Legs - Back Left -->
      <body pos="-0.25 0.15 -0.1">
        <geom type="capsule" size="0.02 0.15" pos="0 0 -0.15" rgba="0.8 0.6 0.1 1"/>
        <geom type="sphere" size="0.03" pos="0 0 -0.3" rgba="0.7 0.5 0.0 1"/>
      </body>

      <!-- Legs - Back Right -->
      <body pos="-0.25 -0.15 -0.1">
        <geom type="capsule" size="0.02 0.15" pos="0 0 -0.15" rgba="0.8 0.6 0.1 1"/>
        <geom type="sphere" size="0.03" pos="0 0 -0.3" rgba="0.7 0.5 0.0 1"/>
      </body>

      <!-- Head -->
      <geom type="sphere" size="0.08" pos="0.35 0 0.05" rgba="0.9 0.8 0.3 1"/>
    </body>
  </worldbody>

  <actuator>
    <motor class="x2" name="thrust1" site="thrust1" gear="0 0 1 0 0 -.0201"/>
    <motor class="x2" name="thrust2" site="thrust2" gear="0 0 1 0 0  .0201"/>
    <motor class="x2" name="thrust3" site="thrust3" gear="0 0 1 0 0  .0201"/>
    <motor class="x2" name="thrust4" site="thrust4" gear="0 0 1 0 0 -.0201"/>
  </actuator>

  <sensor>
    <gyro name="body_gyro" site="imu"/>
    <accelerometer name="body_linacc" site="imu"/>
    <framequat name="body_quat" objtype="site" objname="imu"/>
  </sensor>

  <keyframe>
    <key name="hover" qpos="8 0 2.3 1 0 0 0 -8 0 0.2 1 0 0 0" ctrl="3.2495625 3.2495625 3.2495625 3.2495625"/>
  </keyframe>
</mujoco>